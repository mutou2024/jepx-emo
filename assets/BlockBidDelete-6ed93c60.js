import{u as O,r as Y,a as v,b as n,o as A,c as M,d as e,w as l,e as $,f as c,g as P,t as z,h as K,E as m,i as y,j as C}from"./index-8bb29bdf.js";const Q={class:"block-bid-delete",style:{padding:"20px","background-color":"#f5f7fa","min-height":"100vh"}},q={__name:"BlockBidDelete",setup(U){const _=O(),d=Y({deliveryDate:"",blockTypeCd:"",bidId:""}),g=v(K),s=v([]),k=o=>{s.value=o},h=()=>{m.success("可删除区块入札数据查询成功！"),console.log("删除查询条件：",d)},B=()=>{d.deliveryDate="",d.blockTypeCd="",d.bidId="",s.value=[]},w=o=>{y.confirm(`确定要删除入札编号【${o.bidId}】的区块入札数据吗？删除后不可恢复！`,"删除确认",{confirmButtonText:"确认删除",cancelButtonText:"取消",type:"warning"}).then(()=>{const t={...C,delCount:1,msg:`入札编号【${o.bidId}】删除成功`,bidIds:[o.bidId]};_.push({name:"BlockBidDelResult",props:{delResult:t,isBatch:!1}})}).catch(()=>{m.info("已取消删除操作")})},D=()=>{if(!s.value.length){m.warning("请选择要删除的区块入札数据！");return}y.confirm(`确定要删除选中的【${s.value.length}条】区块入札数据吗？删除后不可恢复！`,"批量删除确认",{confirmButtonText:"确认删除",cancelButtonText:"取消",type:"warning"}).then(()=>{const o=s.value.map(b=>b.bidId),t={...C,delCount:s.value.length,msg:`批量删除${s.value.length}条区块入札数据成功`,bidIds:o};_.push({name:"BlockBidDelResult",state:{delResult:{...t},isBatch:!0}})}).catch(()=>{m.info("已取消批量删除操作")})},x=o=>{console.log("每页显示条数：",o)},I=o=>{console.log("当前页码：",o)};return(o,t)=>{const b=n("el-page-header"),T=n("el-date-picker"),u=n("el-form-item"),r=n("el-option"),V=n("el-select"),N=n("el-input"),p=n("el-button"),L=n("el-form"),f=n("el-card"),i=n("el-table-column"),R=n("el-tooltip"),S=n("el-table"),E=n("el-pagination");return A(),M("div",Q,[e(b,{content:"区块入札删除",onBack:t[0]||(t[0]=a=>o.$router.push("/trade")),style:{"margin-bottom":"20px",background:"#fff",padding:"16px","border-radius":"8px"}}),e(f,{shadow:"hover",style:{"max-width":"1200px","margin-bottom":"20px"}},{default:l(()=>[e(L,{model:d,inline:"",onSubmit:$(h,["prevent"])},{default:l(()=>[e(u,{label:"受渡日"},{default:l(()=>[e(T,{modelValue:d.deliveryDate,"onUpdate:modelValue":t[1]||(t[1]=a=>d.deliveryDate=a),type:"date",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",placeholder:"请选择受渡日"},null,8,["modelValue"])]),_:1}),e(u,{label:"区块类型"},{default:l(()=>[e(V,{modelValue:d.blockTypeCd,"onUpdate:modelValue":t[2]||(t[2]=a=>d.blockTypeCd=a),placeholder:"请选择区块类型"},{default:l(()=>[e(r,{label:"STANDARD-常规区块",value:"STANDARD"}),e(r,{label:"LINK-P-链接父区块",value:"LINK-P"}),e(r,{label:"LINK-C-链接子区块",value:"LINK-C"}),e(r,{label:"LOOP-A-循环A区块",value:"LOOP-A"}),e(r,{label:"LOOP-B-循环B区块",value:"LOOP-B"})]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"入札编号"},{default:l(()=>[e(N,{modelValue:d.bidId,"onUpdate:modelValue":t[3]||(t[3]=a=>d.bidId=a),placeholder:"请输入入札编号（支持模糊查询）"},null,8,["modelValue"])]),_:1}),e(u,null,{default:l(()=>[e(p,{type:"primary",icon:"ElSearch",onClick:h},{default:l(()=>[...t[4]||(t[4]=[c("查询可删除数据",-1)])]),_:1}),e(p,{icon:"ElRefresh",onClick:B},{default:l(()=>[...t[5]||(t[5]=[c("重置",-1)])]),_:1}),e(p,{type:"danger",icon:"ElDelete",onClick:D,disabled:!s.value.length},{default:l(()=>[...t[6]||(t[6]=[c(" 批量删除选中项 ",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1},8,["model"])]),_:1}),e(f,{shadow:"hover",style:{"max-width":"1200px"}},{default:l(()=>[e(S,{data:g.value.list,border:"",stripe:"",style:{width:"100%"},onSelectionChange:k},{default:l(()=>[e(i,{type:"selection",width:"55"}),e(i,{prop:"bidId",label:"入札编号","min-width":"180"}),e(i,{prop:"deliveryDate",label:"受渡日",width:"120"}),e(i,{prop:"blockName",label:"区块名称",width:"120"}),e(i,{prop:"areaName",label:"区域名称",width:"100"}),e(i,{prop:"timeCd",label:"时间帯","min-width":"150"},{default:l(a=>[e(R,{content:"点击查看完整时间帯",placement:"top"},{default:l(()=>[P("span",null,z(a.row.timeCd.length>20?a.row.timeCd.substring(0,20)+"...":a.row.timeCd),1)]),_:2},1024)]),_:1}),e(i,{prop:"bidTypeCd",label:"入札种别",width:"150"}),e(i,{prop:"createTime",label:"创建时间",width:"180"}),e(i,{label:"操作",width:"120"},{default:l(a=>[e(p,{type:"text",icon:"ElDelete",color:"#f56c6c",onClick:j=>w(a.row)},{default:l(()=>[...t[7]||(t[7]=[c(" 删除 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),e(E,{onSizeChange:x,onCurrentChange:I,"current-page":1,"page-sizes":[5,10,20,50],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:g.value.list.length,style:{"margin-top":"20px","text-align":"right"}},null,8,["total"])]),_:1})])}}};export{q as default};
